# BUG-005 - Image Upload Action Type Incorrecte

## Status
**fixed** ✅

## Severity
HIGH

## Description
El mètode `uploadImage` a `api.ts` usava `action: 'edit_text'` enlloc de `action: 'upload_image'` quan cridava `executeComponentAction`, causant que l'upload d'imatges no funcionés correctament.

## Location
- **File:** `src/lib/api.ts`
- **Lines:** 118-128

## Original Code
```tsx
async uploadImage(cardId: string, componentId: string, file: File): Promise<ActionResponse> {
  // ... upload logic ...
  
  return this.executeComponentAction(cardId, componentId, {
    action: 'edit_text',  // ← WRONG!
    payload: { url, filename, size, type: 'image' },
  })
}
```

## Fix Applied
Canviat `action: 'edit_text'` per `action: 'upload_image'`

## Changes Made
```tsx
return this.executeComponentAction(cardId, componentId, {
  action: 'upload_image',  // ← CORRECT!
  payload: { url, filename, size, type: 'image' },
})
```

## Verification
- [x] Type check: 'upload_image' és un valor vàlid de ComponentAction
- [x] Build compiles successfully
- [x] Codi consistent amb el tipatge

## Date Fixed
2026-02-20

## Fixed By
Nestor (Developer)
