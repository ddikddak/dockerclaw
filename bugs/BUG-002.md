# Bug ID: BUG-002

## Title
API endpoints return 404 in development mode - Route handler configuration issue

## Status
- [x] Open
- [x] In Progress
- [x] Fixed
- [x] Verified
- [ ] Closed

## Severity
- [x] Critical - System crash, data loss, security vulnerability

## Description
All API routes in `frontend/src/app/api/` return 404 errors when accessed via HTTP requests in development mode. The routes are correctly listed during the build process:

```
├ ƒ /api/agents/[id]/events
├ ƒ /api/agents/register
├ ƒ /api/cards
├ ƒ /api/cards/[id]/actions
├ ƒ /api/cards/[id]/components/[componentId]/actions
```

However, accessing these routes (e.g., `POST /api/agents/register`) returns a 404 HTML page instead of the expected JSON response.

## Steps to Reproduce
1. Start the frontend dev server: `npm run dev`
2. Try to access any API endpoint:
   ```bash
   curl -X POST http://localhost:3000/api/agents/register \
     -H "Content-Type: application/json" \
     -d '{"name": "Test", "email": "test@example.com"}'
   ```
3. Observe 404 HTML response instead of JSON

## Expected Behavior
API endpoints should return JSON responses (e.g., 201 with agent data on successful registration)

## Actual Behavior
All API endpoints return 404 HTML page

## Root Cause
Unknown - possible causes:
1. Next.js App Router configuration issue
2. Conflict with `output: 'standalone'` in next.config.ts
3. Turbopack configuration issue
4. Route file naming or location issue

## Files Affected
- `frontend/next.config.ts`
- All files in `frontend/src/app/api/`

## Environment
- Next.js version: 16.1.6
- Node.js: 22.x
- OS: Linux

## Additional Notes
This issue blocks all API testing and makes the application non-functional in development mode. The build succeeds, suggesting the route files are syntactically correct, but the runtime routing is broken.

## Possible Solutions to Investigate
1. Remove `output: 'standalone'` from next.config.ts for development
2. Check if middleware is blocking routes
3. Verify route file exports are correct
4. Try without Turbopack: `next dev` instead of `next dev --turbo`
